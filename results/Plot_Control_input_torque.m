clear;
clc;
close all;

%% Dati delle coppie e del tempo
% Vettore con i valori delle coppie
coppie_tau_ = [
     -0.00, 1.11, 1.01, -0.02, -0.08, -0.00;
     -0.00, 1.08, 1.00, -0.02, -0.08, -0.00;
      0.01, 1.09, 0.99, -0.02, -0.08, 0.00;
     -0.00, 1.11, 0.99, -0.02, -0.08, -0.00;
      0.00, 1.13, 0.99, -0.02, -0.08, 0.00;
     -0.00, 1.15, 0.99, -0.02, -0.08, -0.00;
     -0.00, 1.17, 0.99, -0.02, -0.08, -0.00;
     -0.01, 1.21, 0.99, -0.02, -0.08, -0.00;
     -0.00, 1.23, 0.99, -0.02, -0.08, -0.00;
     -0.01, 1.27, 0.99, -0.03, -0.08, -0.00;
     -0.00, 1.30, 0.99, -0.03, -0.08, -0.00;
     -0.01, 1.35, 0.99, -0.03, -0.08, -0.00;
     -0.01, 1.38, 0.99, -0.03, -0.08, -0.00;
      0.05, 1.42, 0.99, -0.02, -0.08, 0.00;
     -0.01, 1.48, 0.99, -0.03, -0.08, -0.00;
      0.04, 1.52, 0.99, -0.02, -0.08, 0.00;
     -0.01, 1.59, 0.99, -0.02, -0.08, -0.00;
      0.05, 1.64, 0.99, -0.02, -0.08, -0.00;
     -0.01, 1.71, 0.99, -0.02, -0.08, -0.00;
      0.07, 1.76, 0.99, -0.02, -0.08, -0.00;
     -0.01, 1.83, 0.99, -0.02, -0.08, 0.00;
     -0.02, 1.90, 0.99, -0.02, -0.08, 0.00;
     -0.00, 1.94, 0.99, -0.02, -0.08, -0.00;
     -0.02, 2.02, 0.99, -0.02, -0.08, 0.00;
      0.02, 2.06, 0.99, -0.02, -0.08, -0.00;
     -0.03, 2.15, 0.99, -0.02, -0.08, 0.00;
      0.06, 2.19, 0.99, -0.02, -0.08, -0.00;
     -0.03, 2.28, 0.99, -0.02, -0.08, 0.00;
      0.12, 2.33, 0.99, -0.02, -0.08, -0.00;
     -0.02, 2.40, 0.99, -0.02, -0.08, 0.00;
     -0.03, 2.47, 0.99, -0.02, -0.08, 0.00;
     -0.01, 2.51, 0.99, -0.02, -0.08, 0.00;
     -0.03, 2.58, 0.99, -0.02, -0.08, 0.00;
     -0.00, 2.62, 0.99, -0.02, -0.08, 0.00;
     -0.03, 2.68, 0.99, -0.02, -0.08, 0.00;
     -0.00, 2.72, 0.99, -0.02, -0.08, 0.00;
     -0.03, 2.77, 0.99, -0.02, -0.08, 0.00,
     -0.01, 2.81, 0.99, -0.02, -0.08, 0.00;
     -0.03, 2.86, 0.99, -0.02, -0.08, 0.00;
     -0.01, 2.89, 0.99, -0.02, -0.08, 0.00;
      0.08, 2.92, 0.99, -0.02, -0.08, -0.00;
     -0.02, 2.96, 0.99, -0.03, -0.08, 0.00;
      0.01, 2.99, 0.99, -0.03, -0.08, -0.00;
     -0.02, 3.03, 0.99, -0.03, -0.08, 0.00;
     -0.02, 3.05, 0.99, -0.03, -0.08, 0.00;
     -0.00, 3.08, 0.99, -0.03, -0.08, 0.00;
      0.01, 3.10, 0.99, -0.03, -0.08, -0.00;
     -0.00, 3.12, 0.99, -0.03, -0.07, 0.00;
];

% Vettore con timestamp (in secondi).
timestamp = [
    1750795872.700509794
    1750795878.507805165
    1750795884.830031981
    1750795890.195125996
    1750795895.734405044
    1750795901.222434919
    1750795906.553005608
    1750795912.160448652
    1750795918.651932735
    1750795923.948421060
    1750795929.398500570
    1750795934.803509067
    1750795940.145638036
    1750795945.385097541
    1750795950.554541177
    1750795955.744289409
    1750795960.907634046
    1750795966.020670744
    1750795971.004591857
    1750795976.251566102
    1750795981.877664341
    1750795987.110399529
    1750795992.230597206
    1750795997.904562659
    1750796003.127333132
    1750796008.534900468
    1750796013.603535430
    1750796018.587716275
    1750796023.896232399
    1750796029.046912992
    1750796033.938383760
    1750796038.898590313
    1750796043.842351077
    1750796049.602849399
    1750796054.410534067
    1750796059.249119146
    1750796065.012550683
    1750796069.951591099
    1750796074.897642662
    1750796079.700767178
    1750796084.680204756
    1750796089.567782904
    1750796094.420810501
    1750796099.275935812
    1750796104.870514273
    1750796110.952254751
    1750796116.889165936
    1750796121.690827586
    ];

% Calcoliamo il tempo relativo per far partire il grafico da t=0
tempo_iniziale = timestamp(1);
tempo_relativo_s = timestamp - tempo_iniziale;


%% Plot
% Numero dei giunti (numero colonne del vettore coppie)
num_giunti = size(coppie_tau_, 2);

% Creazione subplot per ogni giunto
figure('Name', 'Joint torques', 'NumberTitle', 'off');
% Layout 3 righe x 2 colonne
for i = 1:num_giunti
    subplot(3, 2, i);
    plot(tempo_relativo_s(1:size(coppie_tau_, 1)), coppie_tau_(:, i), '-b', 'LineWidth', 1.5);
    grid on;
    ylabel(['\tau_{', num2str(i), '} [Nm]']);
    title(['Joint ', num2str(i)]);
    if i > 4
        xlabel('Time [s]');
    end
end

